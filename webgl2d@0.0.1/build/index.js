System.register(["react","react-dom","react-router-dom"],(function(){"use strict";var t,e,i,r,a,s,n,o;return{setters:[function(e){t=e.default},function(t){e=t.default},function(t){i=t.useParams,r=t.Link,a=t.HashRouter,s=t.Switch,n=t.Route,o=t.Redirect}],execute:function(){function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h{constructor(t,e={}){l(this,"webgl",void 0),l(this,"canvasWidth",800),l(this,"canvasHeight",600),l(this,"stateStack",[]),l(this,"compositing",{globalAlpha:1,globalCompositeOperation:"source-over"}),l(this,"drawingStyles",{lineCap:"butt",lineJoin:"miter",lineDashOffset:0,lineWidth:1,miterLimit:1}),l(this,"imageSmoothing",{imageSmoothingEnabled:!0,imageSmoothingQuality:"medium"}),l(this,"fillStrokeStyles",{fillStyle:"#000000",strokeStyle:"#000000"}),l(this,"filter","none"),l(this,"shadowStyles",{shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",shadowOffsetX:0,shadowOffsetY:0}),l(this,"textDrawingStyles",{direction:"ltr",font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}),this.webgl=t,e.width&&(this.canvasWidth=e.width),e.height&&(this.canvasHeight=e.height)}save(){this.stateStack.push({compositing:{globalAlpha:this.compositing.globalAlpha,globalCompositeOperation:this.compositing.globalCompositeOperation},drawingStyles:{lineCap:this.drawingStyles.lineCap,lineJoin:this.drawingStyles.lineJoin,lineDashOffset:this.drawingStyles.lineDashOffset,lineWidth:this.drawingStyles.lineWidth,miterLimit:this.drawingStyles.miterLimit},fillStrokeStyles:{fillStyle:this.fillStrokeStyles.fillStyle,strokeStyle:this.fillStrokeStyles.strokeStyle},imageSmoothing:{imageSmoothingEnabled:this.imageSmoothing.imageSmoothingEnabled,imageSmoothingQuality:this.imageSmoothing.imageSmoothingQuality},filter:this.filter,shadowStyles:{shadowBlur:this.shadowStyles.shadowBlur,shadowColor:this.shadowStyles.shadowColor,shadowOffsetX:this.shadowStyles.shadowOffsetX,shadowOffsetY:this.shadowStyles.shadowOffsetY},textDrawingStyles:{direction:this.textDrawingStyles.direction,font:this.textDrawingStyles.font,textAlign:this.textDrawingStyles.textAlign,textBaseline:this.textDrawingStyles.textBaseline}})}restore(){if(this.stateStack.length>0){const t=this.stateStack.pop();this.compositing=t.compositing,this.drawingStyles=t.drawingStyles,this.imageSmoothing=t.imageSmoothing,this.fillStrokeStyles=t.fillStrokeStyles,this.filter=t.filter,this.shadowStyles=t.shadowStyles,this.textDrawingStyles=t.textDrawingStyles}}}const f={identity:[1,0,0,0,1,0,0,0,1],multiply(t,e){const i=t[0],r=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],h=t[7],f=t[8],d=e[0],c=e[1],m=e[2],g=e[3],u=e[4],S=e[5],p=e[6],y=e[7],b=e[8];e[0]=d*i+g*r+p*a,e[1]=c*i+u*r+y*a,e[2]=m*i+S*r+b*a,e[3]=d*s+g*n+p*o,e[4]=c*s+u*n+y*o,e[5]=m*s+S*n+b*o,e[6]=d*l+g*h+p*f,e[7]=c*l+u*h+y*f,e[8]=m*l+S*h+b*f},vec2Multiply(t,e){const i=[];return i[0]=e[0]*t[0]+e[3]*t[1]+e[6],i[1]=e[1]*t[0]+e[4]*t[1]+e[7],i},transpose:t=>[t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]]};class d{static getIdentity(){return[1,0,0,0,1,0,0,0,1]}constructor(t){l(this,"matStack",void 0),l(this,"matCache",void 0),l(this,"cStack",void 0),l(this,"valid",void 0),l(this,"result",void 0),l(this,"translateMatrix",d.getIdentity()),l(this,"scaleMatrix",d.getIdentity()),l(this,"rotateMatrix",d.getIdentity()),this.clearStack(t)}clearStack(t){this.matStack=[],this.matCache=[],this.cStack=0,this.valid=0,this.result=null;for(let t=0;t<16;t++)this.matStack[t]=d.getIdentity();t?this.matStack[0]=t:this.setIdentity()}setIdentity(){this.matStack[this.cStack]=d.getIdentity(),this.valid===this.cStack&&this.cStack&&this.valid--}getResult(){if(!this.cStack)return this.matStack[0];const t=f.identity.slice();this.valid>this.cStack-1&&(this.valid=this.cStack-1);for(let e=this.valid;e<this.cStack+1;e++)f.multiply(this.matStack[e],t),this.matCache[e]=t;return this.valid=this.cStack-1,this.result=this.matCache[this.cStack],this.result}pushMatrix(){this.cStack++,this.matStack[this.cStack]=d.getIdentity()}popMatrix(){0!==this.cStack&&this.cStack--}translate(t,e){this.translateMatrix[6]=t,this.translateMatrix[7]=e,f.multiply(this.translateMatrix,this.matStack[this.cStack])}scale(t,e){this.scaleMatrix[0]=t,this.scaleMatrix[4]=e,f.multiply(this.scaleMatrix,this.matStack[this.cStack])}rotate(t){const e=Math.sin(-t),i=Math.cos(-t);this.rotateMatrix[0]=i,this.rotateMatrix[3]=e,this.rotateMatrix[1]=-e,this.rotateMatrix[4]=i,f.multiply(this.rotateMatrix,this.matStack[this.cStack])}}const c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},m=/^rgb(a)?\(\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,?\s*(-?[\d\.]+)?\s*\)$/,g=/^hsl(a)?\(\s*(-?[\d\.]+)\s*,\s*(-?[\d\.]+)%\s*,\s*(-?[\d\.]+)%\s*,?\s*(-?[\d\.]+)?\s*\)$/,u=/^#([0-9A-Fa-f]{6})$/,S=/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/;function p(t){let e=m.exec(t),i=[0,0,0,0];if(e){const t=e[1],r=parseFloat(e[8]);if(t&&isNaN(r)||!t&&!isNaN(r))return!1;const a=e[3];for(let t=2;t<8;t+=2){let r=parseFloat(e[t]);const s=e[t+1];if(s!==a)return!1;s?(r=r>100?1:r/100,r=r<0?0:r):(r=r>255?1:r/255,r=r<0?0:r),i.push(r)}return i.push(t?r:1),i}if(e=g.exec(t),e){const t=!!e[1],r=parseFloat(e[5]);return i=function(t,e,i,r){e=(e=e>100?1:e/100)<0?0:e;const a=(i=(i=i>100?1:i/100)<0?0:i)<=.5?i*(e+1):i+e-i*e,s=2*i-a;function n(t){let e;return e=6*t<1?s+(a-s)*t*6:2*t<1?a:3*t<2?s+(a-s)*(2/3-t)*6:s,e}return[n((t=(t%360+360)%360/360)+1/3),n(t),n(t-1/3),r]}(parseInt(e[2]),parseInt(e[3]),parseInt(e[4]),parseFloat(String(t&&r?r:1))),i}if(e=u.exec(t),e){const t=parseInt(e[1],16);return i=[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1],i}if(e=S.exec(t),e){return p("#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join(""))}return t.toLowerCase()in c?p(c[t.toLowerCase()]):"transparent"===t.toLowerCase()&&[0,0,0,0]}function y(t){return t>0&&0==(t-1&t)}const b=1,x=2;class w{constructor(t,e){l(this,"closed",void 0),l(this,"verts",void 0),this.closed=!1,this.verts=[t,e,0,0]}}function T(t,e,i){const r=t.createShader(i);t.shaderSource(r,e),t.compileShader(r);if(!t.getShaderParameter(r,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(r);return console.error("*** Error compiling shader '"+r+"':"+e),t.deleteShader(r),null}return r}class E{constructor(t){l(this,"gl",void 0),l(this,"internalState",void 0),l(this,"transformer",void 0),l(this,"pathVertexPositionBuffer",void 0),l(this,"rectVertexPositionBuffer",void 0),l(this,"rectVertexColorBuffer",void 0),l(this,"pathVertexColorBuffer",void 0),l(this,"shaderPool",[]),l(this,"subPaths",[]),l(this,"shaderProgram",void 0),l(this,"imageCache",[]),l(this,"textureCache",[]),l(this,"maxTextureSize",void 0),l(this,"fillStyleToVector4",t=>{if("string"!=typeof t)throw new Error("Only support string");const e=p(t);return e||[0,0,0,0]}),l(this,"rectVerts",new Float32Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0])),l(this,"initBuffers",()=>{const t=this.gl;this.rectVertexPositionBuffer=t.createBuffer(),this.rectVertexColorBuffer=t.createBuffer(),this.pathVertexPositionBuffer=t.createBuffer(),this.pathVertexColorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.rectVertexPositionBuffer),t.bufferData(t.ARRAY_BUFFER,this.rectVerts,t.STATIC_DRAW)}),l(this,"getShaderProgram",(t=1,e=0)=>{const i=this.gl,r=this.shaderPool[t]?this.shaderPool[t][e]:null;if(r)return i.useProgram(r),this.shaderProgram=r,r;const a=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(a,function(t){return["#ifdef GL_ES","precision highp float;","#endif","#define hasTexture "+(t&b?"1":"0"),"#define hasCrop "+(t&x?"1":"0"),"varying vec4 vColor;","#if hasTexture","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","#if hasCrop","uniform vec4 uCropSource;","#endif","#endif","void main(void) {","#if hasTexture","#if hasCrop","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);","#else","gl_FragColor = texture2D(uSampler, vTextureCoord);","#endif","#else","gl_FragColor = vColor;","#endif","}"].join("\n")}(e)),i.compileShader(a),!i.getShaderParameter(a,i.COMPILE_STATUS))throw new Error("fragment shader error: "+i.getShaderInfoLog(a));const s=i.createShader(i.VERTEX_SHADER);if(i.shaderSource(s,function(t,e,i,r){return["#define hasTexture "+(e&b?"1":"0"),"attribute vec4 aVertexPosition;","#if hasTexture","varying vec2 vTextureCoord;","#endif","uniform vec4 uColor;","uniform mat3 uTransforms["+(t=t||1)+"];","varying vec4 vColor;","const mat4 pMatrix = mat4("+2/i+",0,0,0, 0,"+-2/r+",0,0, 0,0,1.0,1.0, -1.0,1.0,0,0);","mat3 crunchStack(void) {","mat3 result = uTransforms[0];","for (int i = 1; i < "+t+"; ++i) {","result = uTransforms[i] * result;","}","return result;","}","void main(void) {","vec3 position = crunchStack() * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);","gl_Position = pMatrix * vec4(position, 1.0);","vColor = uColor;","#if hasTexture","vTextureCoord = aVertexPosition.zw;","#endif","}"].join("\n")}(t,e,this.internalState.canvasWidth,this.internalState.canvasHeight)),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS))throw"vertex shader error: "+i.getShaderInfoLog(s);const n=i.createProgram();if(n.stackDepth=t,i.attachShader(n,a),i.attachShader(n,s),i.linkProgram(n),!i.getProgramParameter(n,i.LINK_STATUS))throw"Could not initialise shaders.";i.useProgram(n),n.vertexPositionAttribute=i.getAttribLocation(n,"aVertexPosition"),i.enableVertexAttribArray(n.vertexPositionAttribute),n.uColor=i.getUniformLocation(n,"uColor"),n.uSampler=i.getUniformLocation(n,"uSampler"),n.uCropSource=i.getUniformLocation(n,"uCropSource"),n.uTransforms=[];for(let e=0;e<t;++e)n.uTransforms[e]=i.getUniformLocation(n,"uTransforms["+e+"]");return this.shaderPool[t]||(this.shaderPool[t]=[]),this.shaderPool[t][e]=n,n}),l(this,"drawImage2d",(t,e,i,r,a,s,n,o,l)=>{const h=this.gl,f=this.transformer,d=[t,e,i,r,a,s,n,o,l].filter(t=>void 0!==t);f.pushMatrix();let c=b,m=!1;3===d.length?(f.translate(e,i),f.scale(t.width,t.height)):5===d.length?(f.translate(e,i),f.scale(r,a)):9===d.length&&(f.translate(s,n),f.scale(o,l),c|=x,m=!0);const g=this.getShaderProgram(f.cStack,c),u=this.imageCache.indexOf(t);let S=-1!==u?this.textureCache[u]:null;S||(S={obj:h.createTexture(),index:this.textureCache.push(this)},this.imageCache.push(t),h.bindTexture(h.TEXTURE_2D,S.obj),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,t),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),y(t.width)&&y(t.height)?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR),h.generateMipmap(h.TEXTURE_2D)):h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.bindTexture(h.TEXTURE_2D,null)),m&&h.uniform4f(g.uCropSource,e/t.width,i/t.height,r/t.width,a/t.height),h.bindBuffer(h.ARRAY_BUFFER,this.rectVertexPositionBuffer),h.vertexAttribPointer(g.vertexPositionAttribute,4,h.FLOAT,!1,0,0),h.bindTexture(h.TEXTURE_2D,S.obj),h.activeTexture(h.TEXTURE0),h.uniform1i(g.uSampler,0),this.sendTransformStack(g),h.drawArrays(h.TRIANGLE_FAN,0,4),f.popMatrix()}),l(this,"drawImage3d",t=>{const e=this.gl,i=function(t,e,i,r){const a=t.createProgram();if(e.forEach(e=>{t.attachShader(a,e)}),i&&i.forEach((e,i)=>{t.bindAttribLocation(a,r?r[i]:i,e)}),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){const e=t.getProgramInfoLog(a);return console.error("Error in program linking:"+e),t.deleteProgram(a),null}return a}(e,[T(e,"precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    \n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n    \n    void main() {\n       gl_FragColor = texture2D(u_image, v_texCoord);\n    }",e.FRAGMENT_SHADER),T(e,"attribute vec2 a_position;\n\n    uniform mat3 u_matrix;\n    \n    varying vec2 v_texCoord;\n    \n    void main() {\n       gl_Position = vec4(u_matrix * vec3(a_position, 1), 1);\n    \n       // because we're using a unit quad we can just use\n       // the same data for our texcoords.\n       v_texCoord = a_position;  \n    }",e.VERTEX_SHADER)]);e.useProgram(i);const r=e.getAttribLocation(i,"a_position"),a=e.getUniformLocation(i,"u_matrix"),s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0);const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const o=20/e.canvas.width*2-1,l=30/e.canvas.height*-2+1,h=64/e.canvas.width*2,f=64/e.canvas.height*-2;e.uniformMatrix3fv(a,!1,[h,0,0,0,f,0,o,l,1]),e.drawArrays(e.TRIANGLES,0,6)}),l(this,"isPointInStroke",(t,e,i,r)=>(console.warn("isPointInStroke not implemented"),!1)),l(this,"ellipse",(t,e,i,r,a,s,n,o)=>{console.warn("ellipse not implemented")}),l(this,"getLineDash",()=>(console.warn("getLineDash not implemented"),[])),l(this,"drawImage",(t,e,i,r,a,s,n,o,l)=>{this.drawImage2d(t,e,i,r,a,s,n,o,l)}),l(this,"beginPath",()=>{this.subPaths=[]}),l(this,"clip",(t,e)=>{console.warn("clip not implemented")}),l(this,"fill",(t,e)=>{for(let t=0;t<this.subPaths.length;t++)this.fillSubPath(t)}),l(this,"isPointInPath",(t,e,i,r)=>(console.warn("isPointInPath not implemented"),!1)),l(this,"stroke",t=>{for(let t=0;t<this.subPaths.length;t++)this.strokeSubPath(t);this.gl.flush()}),l(this,"setLineDash",t=>{console.warn("setLineDash not implemented")}),l(this,"getTransform",()=>(console.warn("getTransform not implemented"),{})),l(this,"resetTransform",()=>{}),l(this,"drawFocusIfNeeded",(t,e)=>{console.warn("drawFocusIfNeeded not implemented")}),l(this,"scrollPathIntoView",t=>{console.warn("scrollPathIntoView not implemented")}),l(this,"createLinearGradient",(t,e,i,r)=>(console.warn("createLinearGradient not implemented"),{})),l(this,"createPattern",(t,e)=>{console.warn("createLinearGradient not implemented")}),l(this,"createRadialGradient",(t,e,i,r,a,s)=>(console.warn("createLinearGradient not implemented"),{})),l(this,"fillText",(t,e,i,r)=>{}),l(this,"strokeText",(t,e,i,r)=>{console.warn("strokeText not implemented")}),l(this,"measureText",t=>(console.warn("measureText not implemented"),{})),l(this,"save",()=>{this.transformer.pushMatrix(),this.internalState.save()}),l(this,"restore",()=>{this.transformer.popMatrix(),this.internalState.restore()}),l(this,"translate",(t,e)=>{this.transformer.translate(t,e)}),l(this,"rotate",t=>{this.transformer.rotate(t)}),l(this,"scale",(t,e)=>{this.transformer.scale(t,e)}),l(this,"createImageData",(t,e)=>new ImageData(t,e)),l(this,"getImageData",(t,e,i,r)=>(console.warn("getImageData not implemented"),{})),l(this,"putImageData",(t,e,i)=>{this.drawImage(t,e,i)}),l(this,"transform",(t,e,i,r,a,s)=>{const n=this.transformer.matStack[this.transformer.cStack];n[0]*=t,n[1]*=i,n[2]*=a,n[3]*=e,n[4]*=r,n[5]*=s,n[6]=0,n[7]=0}),l(this,"setTransform",(t,e,i,r,a,s)=>{this.transformer.setIdentity(),this.transform(t,e,i,r,a,s)}),l(this,"fillRect",(t,e,i,r)=>{const a=this.gl,s=this.transformer,n=this.getShaderProgram(s.cStack+2,0);a.bindBuffer(a.ARRAY_BUFFER,this.rectVertexPositionBuffer),a.vertexAttribPointer(n.vertexPositionAttribute,4,a.FLOAT,!1,0,0),s.pushMatrix(),s.translate(t,e),s.scale(i,r),this.sendTransformStack(n);const o=p(this.internalState.fillStrokeStyles.fillStyle);a.uniform4f(n.uColor,o[0],o[1],o[2],o[3]),a.drawArrays(a.TRIANGLE_FAN,0,4),s.popMatrix()}),l(this,"strokeRect",(t,e,i,r)=>{const a=this.transformer,s=this.getShaderProgram(a.cStack+2,0),n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,this.rectVertexPositionBuffer),n.vertexAttribPointer(s.vertexPositionAttribute,4,n.FLOAT,!1,0,0),a.pushMatrix(),a.translate(t,e),a.scale(i,r),this.sendTransformStack(s);const o=this.internalState.fillStrokeStyles.strokeStyle;n.uniform4f(s.uColor,o[0],o[1],o[2],o[3]),n.drawArrays(n.LINE_LOOP,0,4),a.popMatrix()}),l(this,"clearRect",(t,e,i,r)=>{console.warn("clearRect not implemented")}),l(this,"closePath",()=>{const{subPaths:t}=this;if(t.length){const e=t[t.length-1],i=e.verts[0],r=e.verts[1];e.closed=!0;const a=new w(i,r);t.push(a)}}),l(this,"moveTo",(t,e)=>{this.subPaths.push(new w(t,e))}),l(this,"lineTo",(t,e)=>{this.subPaths.length?this.subPaths[this.subPaths.length-1].verts.push(t,e,0,0):this.moveTo(t,e)}),l(this,"quadraticCurveTo",(t,e,i,r)=>{console.warn("quadraticCurveTo not implemented")}),l(this,"bezierCurveTo",(t,e,i,r,a,s)=>{console.warn("bezierCurveTo not implemented")}),l(this,"arcTo",(t,e,i,r,a)=>{console.warn("arcTo not implemented")}),l(this,"arc",(t,e,i,r,a,s)=>{console.warn("arc not implemented")}),this.internalState=new h(t),this.transformer=new d,this.gl=t,this.getShaderProgram(),this.initBuffers(),t.viewport(0,0,800,600),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}sendTransformStack(t){const e=this.transformer.matStack,i=this.transformer.cStack;for(let r=0;r<=i;r++)this.gl.uniformMatrix3fv(t.uTransforms[r],!1,e[i-r])}fillSubPath(t){const e=this.transformer,i=this.getShaderProgram(e.cStack+2,0),r=this.subPaths[t].verts;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.pathVertexPositionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(r),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(i.vertexPositionAttribute,4,this.gl.FLOAT,!1,0,0),e.pushMatrix(),this.sendTransformStack(i);const a=this.fillStyleToVector4(this.internalState.fillStrokeStyles.fillStyle);this.gl.uniform4f(i.uColor,a[0],a[1],a[2],a[3]),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,r.length/4),e.popMatrix()}strokeSubPath(t){const e=this.transformer,i=this.getShaderProgram(e.cStack+2,0),r=this.subPaths[t],a=r.verts;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.pathVertexPositionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(a),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(i.vertexPositionAttribute,4,this.gl.FLOAT,!1,0,0),e.pushMatrix(),this.sendTransformStack(i);const s=this.internalState.fillStrokeStyles.strokeStyle;this.gl.uniform4f(i.uColor,s[0],s[1],s[2],s[3]),r.closed?this.gl.drawArrays(this.gl.LINE_LOOP,0,a.length/4):this.gl.drawArrays(this.gl.LINE_STRIP,0,a.length/4),e.popMatrix()}get canvas(){return null}get globalAlpha(){return this.internalState.compositing.globalAlpha}set globalAlpha(t){this.internalState.compositing.globalAlpha=t}get globalCompositeOperation(){return this.internalState.compositing.globalCompositeOperation}set globalCompositeOperation(t){this.internalState.compositing.globalCompositeOperation=t}get fillStyle(){return this.internalState.fillStrokeStyles.fillStyle}set fillStyle(t){if("string"==typeof t){p(t)&&(this.internalState.fillStrokeStyles.fillStyle=t)}}get strokeStyle(){return this.internalState.fillStrokeStyles.strokeStyle}set strokeStyle(t){this.internalState.fillStrokeStyles.strokeStyle=t}get filter(){return this.internalState.filter}set filter(t){this.internalState.filter=t}get imageSmoothingEnabled(){return this.internalState.imageSmoothing.imageSmoothingEnabled}set imageSmoothingEnabled(t){this.internalState.imageSmoothing.imageSmoothingEnabled=t}get imageSmoothingQuality(){return this.internalState.imageSmoothing.imageSmoothingQuality}set imageSmoothingQuality(t){this.internalState.imageSmoothing.imageSmoothingQuality=t}get lineWidth(){return this.internalState.drawingStyles.lineWidth}set lineWidth(t){this.gl.lineWidth(t),this.internalState.drawingStyles.lineWidth=t}get lineDashOffset(){return this.internalState.drawingStyles.lineDashOffset}set lineDashOffset(t){this.internalState.drawingStyles.lineDashOffset=t}get lineCap(){return this.internalState.drawingStyles.lineCap}set lineCap(t){this.internalState.drawingStyles.lineCap=t}get lineJoin(){return this.internalState.drawingStyles.lineJoin}set lineJoin(t){this.internalState.drawingStyles.lineJoin=t}get miterLimit(){return this.internalState.drawingStyles.miterLimit}set miterLimit(t){this.internalState.drawingStyles.miterLimit=t}get shadowOffsetX(){return this.internalState.shadowStyles.shadowOffsetX}set shadowOffsetX(t){this.internalState.shadowStyles.shadowOffsetX=t}get shadowOffsetY(){return this.internalState.shadowStyles.shadowOffsetY}set shadowOffsetY(t){this.internalState.shadowStyles.shadowOffsetY=t}get shadowBlur(){return this.internalState.shadowStyles.shadowBlur}set shadowBlur(t){this.internalState.shadowStyles.shadowBlur=t}get shadowColor(){return this.internalState.shadowStyles.shadowColor}set shadowColor(t){this.internalState.shadowStyles.shadowColor=t}get font(){return this.internalState.textDrawingStyles.font}set font(t){this.internalState.textDrawingStyles.font=t}get textAlign(){return this.internalState.textDrawingStyles.textAlign}set textAlign(t){this.internalState.textDrawingStyles.textAlign=t}get textBaseline(){return this.internalState.textDrawingStyles.textBaseline}set textBaseline(t){this.internalState.textDrawingStyles.textBaseline=t}get direction(){return this.internalState.textDrawingStyles.direction}set direction(t){this.internalState.textDrawingStyles.direction=t}rect(t,e,i,r){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.closePath()}}function v(e){const i=t.useRef(null),r=t.useRef(null);t.useEffect(()=>{if(i.current){const t=i.current;t.width=800,t.style.border="1px solid #eee",t.height=600;const r=function(t){return new E(t)}(t.getContext("webgl"));e.onContextCreated(r),console.log()}},[i]),t.useEffect(()=>{if(r.current){const t=r.current;t.style.border="1px solid #eee",t.width=800,t.height=600;const i=t.getContext("2d");e.onContextCreated(i),console.log()}},[r]);const a=t.useMemo(()=>({borderWidth:0,borderTopWidth:1,borderColor:"#eee",borderStyle:"solid",padding:20,boxSizing:"border-box"}),[]);return t.createElement("div",null,t.createElement("div",{style:{padding:20}},t.createElement("div",{style:{padding:20}},"webgl2d"),t.createElement("canvas",{ref:i}," ")),t.createElement("div",{style:{margin:"20px 0",borderBottom:"1px solid #eee"}}),t.createElement("div",{style:{padding:20}},t.createElement("div",{style:{padding:20}},"normal 2d"),t.createElement("canvas",{ref:r}," ")),t.createElement("div",null,t.createElement("pre",{style:a},e.onContextCreated.toString())))}const A={arc:t=>{t.beginPath(),t.arc(100,75,50,0,2*Math.PI),t.stroke()},fillRect:t=>{t.fillStyle="blue",t.fillRect(10,10,100,100)},rect:t=>{t.rect(10,20,150,100),t.fill()},ellipse:t=>{t.beginPath(),t.ellipse(100,100,50,75,Math.PI/4,0,2*Math.PI),t.stroke(),t.beginPath(),t.setLineDash([5,5]),t.moveTo(0,200),t.lineTo(200,0),t.stroke()},rotate:t=>{t.arc(0,0,5,0,2*Math.PI),t.fillStyle="blue",t.fill(),t.fillStyle="gray",t.fillRect(100,0,80,20),t.rotate(45*Math.PI/180),t.fillStyle="red",t.fillRect(100,0,80,20),t.setTransform(1,0,0,1,0,0)},scale:t=>{t.scale(9,3),t.fillStyle="red",t.fillRect(10,10,8,20),t.setTransform(1,0,0,1,0,0),t.fillStyle="gray",t.fillRect(10,10,8,20)},translate:t=>{t.translate(110,30),t.fillStyle="red",t.fillRect(0,0,80,80),t.setTransform(1,0,0,1,0,0),t.fillStyle="gray",t.fillRect(0,0,80,80)},drawImage:t=>{const e=new Image;e.onload=()=>{t.drawImage(e,33,71,104,124,21,20,87,104)},e.src="/rhino.jpg"},fillText:t=>{t.font="48px serif",t.fillText("Hello world",10,50)}};function k(){const e=i(),a=t.useMemo(()=>({position:"fixed",left:0,top:0,bottom:0,width:300,borderWidth:0,borderRightWidth:1,borderStyle:"solid",borderColor:"#eee"}),[]),s=t.useMemo(()=>({padding:20,borderWidth:0,borderBottomWidth:1,borderStyle:"solid",borderColor:"#eee"}),[]),n=Object.keys(A).sort();return t.createElement("div",null,t.createElement("div",null,t.createElement("div",{style:a},t.createElement("div",{style:s},t.createElement("div",{style:{fontSize:20}},t.createElement(r,{to:"/",style:{color:"#000",textDecoration:"none"}},"webgl2d")),t.createElement("div",{style:{fontSize:14}},"Create CanvasRenderingContext2D from WebGLRenderingContext")),t.createElement("div",{style:{padding:20}},n.map(e=>t.createElement("div",{key:e},t.createElement(r,{style:{fontFamily:"monospace",fontSize:16,textDecoration:"none"},to:"/demo/"+e},e)))))),t.createElement("div",{style:{marginLeft:300}},t.createElement(v,{key:e.apiName,onContextCreated:A[e.apiName]})))}function P(){const e=Object.keys(A).sort();return t.createElement(a,null,t.createElement(s,null,t.createElement(n,{path:"/",exact:!0},t.createElement(o,{to:"/demo/"+e[0]})),e.map(e=>t.createElement(n,{key:e,path:`/demo/:apiName(${e})`,component:k}))))}new class{constructor(){let i=document.getElementById("root");i||(i=document.createElement("div"),i.id="root",document.body.appendChild(i)),document.body.style.margin="0px",e.render(t.createElement(P,null),i)}}}}}));
